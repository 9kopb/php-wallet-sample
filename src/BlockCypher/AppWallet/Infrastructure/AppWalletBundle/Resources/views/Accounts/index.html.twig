{% extends "BlockCypherAppCommonInfrastructureLayoutBundle::base.html.twig" %}

{% block title %}Accounts{% endblock title %}

{% block page_header %}
    <h1>
        <i class="fa fa-qrcode"></i>
        Accounts
    </h1>

    <h2 class="tagline wrapit semi">
        Your accounts
    </h2>
{% endblock page_header %}

{% block content %}
    <div class="container">
        <div class="section">
            <div class="col-md-12">
                <p class="text-center">
                    <a href="TODO LINK TO NEW ACCOUNT"
                       class="btn btn-lg btn-default">
                        <i class="fa fa-plus"></i>
                        New Account
                    </a>
                </p>
            </div>
        </div>

        {% if accounts %}

            <div class="col-md-12">

                <h2>
                    {{ num_all_accounts|intcomma }} Accounts
                </h2>

                {% if max_pages > 1 %}
                    <div class="section pager">
                        <div class="row">
                            <div class="col-sm-4 text-left">
                                {% if current_page > 1 %}
                                    <a href="?page={{ current_page|add(-1)|intcomma }}" class="btn btn-default">
                                        <i class="fa fa-angle-double-left"></i>
                                        Previous Page
                                    </a>
                                {% endif %}
                            </div>

                            <div class="col-sm-4 text-center">
                                Page of
                            </div>

                            <div class="col-sm-4 text-right">
                                {% if current_page < max_pages %}
                                    <a href="?page={{ current_page|add(1)|intcomma }}" class="btn btn-default">
                                        Next Page
                                        <i class="fa fa-angle-double-right"></i>
                                    </a>
                                {% endif %}
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                {% endif %}

                <div class="table-responsive">
                    <table class="table">
                        <tr>
                            <th>Tag</th>
                            <th>Balance</th>
                            <th>Creation Time</th>
                            <th>Id</th>
                            <th>Actions</th>
                        </tr>
                        {% for account in accounts %}
                            <tr class="tx-row" id="{{ account.id.value }}">
                                <td class="">
                                    {{ account.tag }}
                                </td>
                                <td class="">
                                    {{ account.balance|satoshis_to_btc_rounding|intcomma }}
                                </td>
                                <td>
                                    <time class="timeago"
                                          datetime="{{ account.creationTime|date('Y-m-d\TH:i:s') }}Z">
                                        {{ account.creationTime|date('Y-m-d H:i') }} GMT
                                    </time>
                                </td>
                                <td class="truncate">
                                    <a href="{{ path('bc_app_wallet_address.index', {'accountId': account.id.value }) }}"
                                       class="hidden-xs tx-list small">
                                        {{ account.id.value }}
                                    </a>
                                </td>
                                <td class="truncate">
                                    <a href="{{ path('bc_app_wallet_address.index', {'accountId': account.id.value }) }}"
                                       class="hidden-xs tx-list small">
                                        List addresses
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}

                    </table>
                </div>

                {% if max_pages > 1 %}
                    <div class="section pager">
                        <div class="row">
                            <div class="col-sm-4 text-left">
                                {% if current_page > 1 %}
                                    <a href="?page={{ current_page|add(-1)|intcomma }}" class="btn btn-default">
                                        <i class="fa fa-angle-double-left"></i>
                                        Previous Page
                                    </a>
                                {% endif %}
                            </div>

                            <div class="col-sm-4 text-center">
                                Page of
                            </div>

                            <div class="col-sm-4 text-right">
                                {% if current_page < max_pages %}
                                    <a href="?page={{ current_page|add(1)|intcomma }}" class="btn btn-default">
                                        Next Page
                                        <i class="fa fa-angle-double-right"></i>
                                    </a>
                                {% endif %}
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                {% endif %}

            </div>

        {% else %}
            <p>No accounts detected.</p>
        {% endif %}

    </div>

{% endblock content %}

{% block extra_js %}
{% endblock extra_js %}